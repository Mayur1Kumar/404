"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _possibleConstructorReturn(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var AdsAdapter=function(){function t(e){_classCallCheck(this,t),this.adSolution="none",this._isConfigReady=!1,this._downloading={},e&&this.setConfig(e)}return _createClass(t,[{key:"_setConfig",value:function(e){}},{key:"setConfig",value:function(e){var t=this;this._cfg=e[this.adSolution],this._cfg&&(["containerId","containerIdList","ads","loadingTheme","publisher","app","timeout"].forEach(function(e){return t[e]=t._cfg[e]}),Object.keys(this.ads).forEach(function(e){if(t.ads[e].adname=e,!t.ads[e].type)throw new Error("No advertising type declared\nPlease add your config files or object")}),this._setConfig(this._cfg)),this._setConfigReady()}},{key:"_setConfigReady",value:function(){this._isConfigReady=!0}},{key:"isConfigSet",value:function(){return this._isConfigReady}},{key:"getConfig",value:function(e){var t=void 0;return"string"==typeof e?t=this.ads[e]:"object"==(void 0===e?"undefined":_typeof(e))&&(t=e),t}},{key:"getAdsElementId",value:function(e){var t=this.getConfig(e.adname);if(t)return t=Object.assign({},t,e),"ADS_"+this.getIdentifier(t)}},{key:"_createAdElement",value:function(e){}},{key:"createAdElement",value:function(e){var t=this.getConfig(e.adname);if(t)return t=Object.assign({},t,e),this._createAdElement(t)}},{key:"_getContainerIdList",value:function(e){var t=e.containerId||this.containerId;return e.containerIdList||this.containerIdList||[t]}},{key:"insertAdInContainer",value:function(e){var t=this.getConfig(e.adname);if(t){var n=this.createAdElement(e),t=Object.assign({},t,e),e=this.getIdentifier(t);if("Interstitial"===t.type){if(n)return n.id=e,document.body.appendChild(n),!0}else{t=document.getElementById(e);if(t)return t.appendChild(n),!0}}}},{key:"_shallDisplayAd",value:function(e){var t=e.adname,e=e.displayFrequency,n=e;if(void 0===e)return!0;if("string"==typeof e&&NaN===(n=parseInt(e)))return!0;if("number"!=typeof n)return!0;if(n<=0)return!0;var e=!1,t="ads."+t+".count",i=localStorage.getItem(t);return(i=i?parseInt(i):1)<n?i++:(i=1,e=!0),localStorage.setItem(t,i),e}},{key:"_cleanAdsTrace",value:function(e){}},{key:"cleanAdsTrace",value:function(e){var t=this.getConfig(e.adname);if(t){var t=Object.assign({},t,e),t=this.getIdentifier(t),n=document.getElementById(t);if(n)if("Interstitial"===e.type)n.remove();else for(;n.firstChild;)n.removeChild(n.firstChild);e.containerId&&e.adname&&((t=this.getConfig(e.adname))&&(t=Object.assign({},t,e),this._cleanAdsTrace(t)))}}},{key:"_callAction",value:function(e){}},{key:"callAction",value:function(e){var t=this.getConfig(e.adname);t&&(t=Object.assign({},t,e),this.getIdentifier(t)&&t.adname&&this._callAction(t))}},{key:"getIdentifier",value:function(e){return"Interstitial"===e.type?"ADS_fullscreen_root":e.containerId}},{key:"_showAds",value:function(e){}},{key:"showAds",value:function(e){if(this.isConfigSet()){var t=this.getConfig(e.adname);if(t){var n=Object.assign({},t,e),i=this.getIdentifier(n);if(!this._downloading[i])return"kai"===this.adSolution||this._shallDisplayAd(t)?void this._showAds(n):(n.onAdSkipped&&n.onAdSkipped(e),void(n.onAdFinished&&n.onAdFinished(e)))}else e.onAdFinished&&e.onAdFinished(e)}}}]),t}();function getEnterEvent(){var e=new CustomEvent("keydown");return e.key="Enter",e}function focusWithTabindex(e){var t=e.getAttribute("tabindex");null===t&&e.setAttribute("tabindex",0),e.focus(),null===t&&e.removeAttribute("tabindex")}var KaiAd=function(){function t(e){_classCallCheck(this,t);e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e.adSolution="jio",e._vmaxContainerId="vmx-cover",e.insClass="adsbyvmax",e.adsCfgs={},e.initVMAXSDK(),e}return _inherits(t,AdsAdapter),_createClass(t,[{key:"initVMAXSDK",value:function(){var i=this;JioAds.onAdError=function(e,t){var n=i.adsCfgs[e];n._downloading=!1,console.log("error",t),i.cleanAdsTrace(n),n.onAdError&&n.onAdError({adsElementId:e,containerId:n.containerId,errorCode:t}),n.onAdFinished&&"Interstitial"===n.type&&n.onAdFinished({adsElementId:e,containerId:n.containerId})},JioAds.onAdClose=function(e){var t=i.adsCfgs[e];i.cleanAdsTrace(t),t.onAdDismissed&&t.onAdDismissed({adsElementId:e,containerId:t.containerId}),t.onAdFinished&&t.onAdFinished({adsElementId:e,containerId:t.containerId})},JioAds.onAdClick=function(e){var t=i.adsCfgs[e],n="Interstitial"===t.type;n&&i.cleanAdsTrace(t),t.onAdClicked&&t.onAdClicked({adsElementId:e,containerId:t.containerId}),t.onAdFinished&&n&&t.onAdFinished({adsElementId:e,containerId:t.containerId})},JioAds.onAdReady=function(e){var t=i.adsCfgs[e];t._downloading=!1,t.onAdSuccess&&t.onAdSuccess({adsElementId:e,containerId:t.containerId})}}},{key:"_setConfig",value:function(t){var n=this;["adspot","source","insClass","containerDivClass"].forEach(function(e){return n[e]=t[e]})}},{key:"_createAdElement",value:function(e){var t=e.adspot,n=e.source,i=e.insClass,o=e.containerDivClass,a=e.type,s=document.createElement("div"),a=(s.classList.add("vmax_container",a.toLowerCase(),this.loadingTheme),o&&s.classList.add(o),document.createElement("ins"));return a.id=this.getAdsElementId(e),i&&a.classList.add(i),a.setAttribute("data-adspot-key",t),a.setAttribute("data-source",n),s.appendChild(a),s}},{key:"_cleanAdsTrace",value:function(e){var t=document.getElementById(this._vmaxContainerId);t&&t.remove()}},{key:"_callAction",value:function(e){var t,e=document.querySelector("#"+e.containerId+" a[id^='VMAX_ADS']");e?(t=document.activeElement,e.focus(),e.dispatchEvent(getEnterEvent()),focusWithTabindex(t)):console.error("Banner or Billboard not found")}},{key:"_removeOldRefs",value:function(){var t=this;return new Promise(function(){Object.keys(t.adsCfgs).forEach(function(e){!1!==t.adsCfgs[e]._downloading||document.getElementById(t.adsCfgs[e].adsElementId)||delete t.adsCfgs[e]})})}},{key:"_showAds",value:function(e){var t=this.getAdsElementId(e);this.adsCfgs[t]&&this.adsCfgs[t]._downloading||(this.insertAdInContainer(e),this.adsCfgs[t]=Object.assign({},e),this.adsCfgs[t]._downloading=!0,JioAds.showAd(t),(e=this.adsCfgs[t])._downloading=!1,e.onAdSuccess&&e.onAdSuccess({adsElementId:t,containerId:e.containerId}))}}]),t}();function getEnterEvent(){var e=new CustomEvent("keydown");return e.key="Enter",e}function focusWithTabindex(e){var t=e.getAttribute("tabindex");null===t&&e.setAttribute("tabindex",0),e.focus(),null===t?e.removeAttribute("tabindex"):e.setAttribute("tabindex",t)}
console.log('AdAdapter version 1.7.2');